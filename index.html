<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Auto 3D AMV â€” Browser + HF Spaces</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ðŸŽ¬ Auto 3D AMV â€” Browser + HF Spaces (Free)</h1>
      <p>No installs. AI backgrounds via free Hugging Face Spaces endpoints.</p>
    </header>

    <section class="controls">
      <div class="col">
        <label>Project Title</label>
        <input id="title" placeholder="My Song"/>
        <label>Style Brief</label>
        <input id="style" value="Fun, upbeat, colorful 3D for kids; Pixar-like; classroom stage"/>
        <label>Lyrics (paste)</label>
        <textarea id="lyrics" rows="8" placeholder="Paste lyrics..."></textarea>
      </div>
      <div class="col">
        <label>Audio (WAV/MP3)</label>
        <input id="audio" type="file" accept=".wav,.mp3"/>

        <!-- Space URL field is optional now; we hard-code a default in the JS.
             You can still override by typing a different URL here. -->
        <label>Hugging Face Space URL (optional override)</label>
        <input id="space" placeholder="https://huggingface.co/spaces/Nwt002tech/MuvidGen"/>

        <div class="btns">
          <!-- Fallback onclick calls window.AMV_generate -->
          <button id="genBtn" onclick="window.AMV_generate && window.AMV_generate()">Generate Full Video</button>
          <button id="stopBtn" disabled>Stop</button>
        </div>
        <div class="status" id="status">Page JS loaded (booting module)â€¦</div>
        <div class="download" id="download"></div>
      </div>
    </section>

    <section class="stage">
      <canvas id="stage"></canvas>
    </section>

    <footer>
      <small>Host these static files on GitHub Pages / Cloudflare Pages / Netlify â€” free.
      The app calls your HF Space directly from the browser.</small>
    </footer>
  </div>

  <!-- Bootloader: dynamic import with visible error reporting -->
  <script>
  (async function(){
    const s = document.getElementById('status');
    try {
      const url = new URL('app.module.js', location.href).toString();
      await import(url);
      s.textContent = 'Module imported âœ…';
    } catch (e) {
      console.error(e);
      s.textContent = 'Module import error: ' + (e && e.message ? e.message : e);
    }
  }());
  </script>
</body>
</html>
